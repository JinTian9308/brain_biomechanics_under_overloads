<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent Interface</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* 页面整体布局 */
        .container {
            display: grid;
            grid-template-columns: 2fr 1fr; /* 左宽右窄 */
            grid-template-rows: auto 1fr auto; /* 上中下 */
            gap: 20px;
            margin: 20px;
        }

        /* 左侧：图表展示区域 */
        .bottom-left {
            grid-column: 1 / 2;
            grid-row: 1 / 4;
            background-color: #f9f9f9;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* 右侧：整体区域 */
        .right-side {
            grid-column: 2 / 3;
            display: flex;
            flex-direction: column;
            gap: 20px; /* 子元素之间的间距 */
        }

        /* 右上角：计算结果和查询 */
        .top-right {
            background-color: #ffffff;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            flex: 1; /* 保证平衡 */
        }

        /* 右下角：聊天框 */
        .bottom-right {
            background-color: #ffffff;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            flex: 2; /* 更大比例分配给聊天框 */
        }

        /* 聊天框内容 */
        #chat-box {
            flex-grow: 1;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
            margin-bottom: 10px;
            max-height: 200px;
        }

        #chat-log {
            font-size: 14px;
            color: #333;
        }

        /* 输入框和按钮 */
        #chat-input {
            width: 100%;
            height: 50px;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        button {
            padding: 10px 15px;
            border: none;
            background-color: #28a745;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            margin-right: 10px;
        }

        button:hover {
            background-color: #218838;
        }

        /* 让输入框和按钮布局更合理 */
        #chat-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 表单元素对齐 */
        form input, form label, form button {
            margin-right: 10px;
        }

        form label {
            margin-bottom: 5px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- 标题区域 -->
    <header class="header" style="text-align: center; padding: 10px; background-color: #28a745; color: white;">
        <h1>AI Agent for Rapid Prediction of Brain Response Under Sustained High-G Overloads</h1>
    </header>

    <div class="container">
        <!-- 左侧：图表展示区域 -->
        <div class="bottom-left">
            <h2>Visualization</h2>
            <div class="scaled-content">
                <iframe id="chart-frame" src="" style="width:154%; height:1000px; border:none;"></iframe>
            </div>
        </div>

        <!-- 右侧：整体区域 -->
        <div class="right-side">
            <!-- 右上角：计算结果和查询 -->
            <div class="top-right">
                <h2>Calculation Results</h2>
                <div id="calculation-results">
                    <p>No data yet.</p>
                </div>
                <form id="query-form" style="margin-top: 15px;">
                    <div class="form-header">
                        <h3>Query Specific Point</h3>
                        <button type="button" id="query-point">Query</button>
                    </div>
                    <div class="form-row">
                        <div>
                            <label for="x-coord">X:</label>
                            <input type="number" id="x-coord" name="x-coord" step="0.1" required>
                        </div>
                        <div>
                            <label for="y-coord">Y:</label>
                            <input type="number" id="y-coord" name="y-coord" step="0.1" required>
                        </div>
                        <div>
                            <label for="z-coord">Z:</label>
                            <input type="number" id="z-coord" name="z-coord" step="0.1" required>
                        </div>
                    </div>
                </form>
                <div id="download-link" style="margin-top: 10px;">
                    <a href="/download-results" download="prediction_results.csv">Download Results</a>
                </div>
            </div>

            <!-- 右下角：聊天框 -->
            <div class="bottom-right">
                <h2>Chat Interface</h2>
                <div id="chat-box">
                    <div id="chat-log"></div>
                </div>
                <textarea id="chat-input" placeholder="Type your message here..."></textarea>
                <div id="chat-controls">
                    <button id="send-message">Send</button>
                    <button id="record-voice">🎤 Hold to Record</button>
                    <span id="recording-status">&nbsp;</span> <!-- 占位符，默认空白 -->
                </div>
            </div>
        </div>
    </div>

   
    <script src="/static/script.js"></script>
</body>
</html>
